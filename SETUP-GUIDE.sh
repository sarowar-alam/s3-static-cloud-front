#!/bin/bash

#############################################
# Quick Setup Guide
# Step-by-step instructions for complete setup
#############################################

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘     AWS Static Website with CloudFront & SSL Certificate      â•‘"
echo "â•‘                    Complete Setup Guide                        â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Domain: bmiostad.ostaddevops.click"
echo "Bucket: ostad-devops-batch-10 (ap-south-1)"
echo "Profile: sarowar-ostad"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "PHASE 1: SSL CERTIFICATE (Run on Ubuntu 24.04)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "These steps must be run on Ubuntu 24.04 with root/sudo access"
echo ""
echo "Step 1: Install Certbot"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 01-install-certbot.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Installs Certbot and Route53 DNS plugin"
echo "  â€¢ Verifies installation"
echo ""
echo ""
echo "Step 2: Request SSL Certificate"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  âš ï¸  FIRST: Edit 02-request-certificate.sh and update EMAIL!"
echo ""
echo "  bash 02-request-certificate.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Requests Let's Encrypt certificate via DNS-01 challenge"
echo "  â€¢ Automatically creates DNS TXT records in Route53"
echo "  â€¢ Verifies domain ownership"
echo "  â€¢ Issues certificate (valid for 90 days)"
echo ""
echo ""
echo "Step 3: Export Certificate Files"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 03-export-certificate.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Exports certificate files from /etc/letsencrypt/"
echo "  â€¢ Saves to ./ssl-certs/ directory"
echo "  â€¢ Prepares files for ACM import"
echo ""
echo ""
echo "Step 4: Import to AWS ACM"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 04-import-to-acm.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Imports certificate to AWS ACM in us-east-1"
echo "  â€¢ Required region for CloudFront"
echo "  â€¢ Saves certificate ARN to certificate-arn.txt"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "PHASE 2: AWS INFRASTRUCTURE (Run anywhere with AWS CLI)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "These steps can be run on any machine with AWS CLI configured"
echo ""
echo "Step 5: Create S3 Bucket"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 05-create-s3-bucket.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Creates private S3 bucket in ap-south-1"
echo "  â€¢ Uploads index.html and error.html"
echo "  â€¢ Enables static website hosting"
echo "  â€¢ Keeps bucket private (Block Public Access enabled)"
echo ""
echo ""
echo "Step 6a: Create CloudFront OAC"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 06-create-cloudfront-oac.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Creates Origin Access Control for CloudFront"
echo "  â€¢ Enables secure access to private S3 bucket"
echo "  â€¢ Saves OAC ID to oac-id.txt"
echo ""
echo ""
echo "Step 6b: Create CloudFront Distribution"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 06-create-cloudfront.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Creates CloudFront distribution"
echo "  â€¢ Configures S3 origin with OAC"
echo "  â€¢ Attaches SSL certificate"
echo "  â€¢ Sets up custom domain"
echo "  â€¢ Enables HTTPS redirect"
echo "  â€¢ Configures custom error responses"
echo "  â€¢ Saves distribution ID and domain"
echo ""
echo "  â³ Takes 5-15 minutes to deploy globally"
echo ""
echo ""
echo "Step 7: Update S3 Bucket Policy"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 07-update-bucket-policy.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Updates bucket policy to allow CloudFront OAC access"
echo "  â€¢ Restricts access to specific CloudFront distribution"
echo "  â€¢ Keeps bucket private to public"
echo ""
echo ""
echo "Step 8: Create Route53 DNS Record"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 08-create-route53-record.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Creates A record (IPv4) in Route53"
echo "  â€¢ Creates AAAA record (IPv6) in Route53"
echo "  â€¢ Points domain to CloudFront distribution"
echo "  â€¢ Uses Alias records (no query charges)"
echo ""
echo "  â³ DNS propagation: 5-60 minutes"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "VERIFICATION"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "After DNS propagation completes, test your website:"
echo ""
echo "Test HTTPS access:"
echo "  curl -I https://bmiostad.ostaddevops.click"
echo ""
echo "Test HTTP redirect:"
echo "  curl -I http://bmiostad.ostaddevops.click"
echo ""
echo "Test SSL certificate:"
echo "  openssl s_client -connect bmiostad.ostaddevops.click:443"
echo ""
echo "Test DNS resolution:"
echo "  nslookup bmiostad.ostaddevops.click"
echo "  dig bmiostad.ostaddevops.click"
echo ""
echo "Open in browser:"
echo "  https://bmiostad.ostaddevops.click"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "CERTIFICATE RENEWAL (Every 60-80 days)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Let's Encrypt certificates expire every 90 days"
echo ""
echo "Step 9: Renew Certificate"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  bash 09-renew-certificate.sh"
echo ""
echo "  What it does:"
echo "  â€¢ Renews certificate with Certbot"
echo "  â€¢ Exports renewed certificate"
echo "  â€¢ Re-imports to ACM (same ARN)"
echo "  â€¢ CloudFront automatically uses renewed certificate"
echo ""
echo "ğŸ“… Set a calendar reminder to run this every 60 days!"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "STATUS CHECKER"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Check setup progress at any time:"
echo "  bash 00-check-status.sh"
echo ""
echo "This shows:"
echo "  â€¢ Which steps are completed"
echo "  â€¢ What needs to be done next"
echo "  â€¢ Certificate expiry status"
echo "  â€¢ Useful commands"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "TROUBLESHOOTING"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "CloudFront deployment status:"
echo "  aws cloudfront get-distribution \\"
echo "    --id \$(cat distribution-id.txt) \\"
echo "    --profile sarowar-ostad \\"
echo "    --query 'Distribution.Status'"
echo ""
echo "Check Route53 record:"
echo "  aws route53 list-resource-record-sets \\"
echo "    --hosted-zone-id Z1019653XLWIJ02C53P5 \\"
echo "    --profile sarowar-ostad \\"
echo "    --query 'ResourceRecordSets[?Name==\`bmiostad.ostaddevops.click.\`]'"
echo ""
echo "Check certificate in ACM:"
echo "  aws acm describe-certificate \\"
echo "    --certificate-arn \$(cat certificate-arn.txt) \\"
echo "    --region us-east-1 \\"
echo "    --profile sarowar-ostad"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "IMPORTANT NOTES"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âœ“ Certificate must be in us-east-1 for CloudFront"
echo "âœ“ S3 bucket can be in any region (we use ap-south-1)"
echo "âœ“ Bucket is private - only accessible via CloudFront"
echo "âœ“ Let's Encrypt certificates expire every 90 days"
echo "âœ“ DNS propagation can take 5-60 minutes"
echo "âœ“ CloudFront deployment takes 5-15 minutes"
echo "âœ“ Never commit ssl-certs/ directory to git"
echo ""
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "NEED HELP?"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "Read the complete documentation:"
echo "  cat README.md"
echo ""
echo "Or open README.md in your preferred text editor/browser"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
